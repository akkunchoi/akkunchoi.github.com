---
layout: posts
title: Apple Mail (Mail.app) がメモリをアホみたいに食う (MacOSX Snow Leopard)
tags: MacOSX
---


Mail.appをしばらく使っていると、メモリを大量に消費するという現象にしばしば遭遇する（２年以上も前から発生してたかも）。

現在の環境は MBP, OSX10.6.8, Core2Duo, メモリ4GB, Mail.app 4.5(1084)

作業していると急に遅くなり、iStat Menuでメモリを見てみると Swap 8.00GB 、Mailがメモリを1.5GB以上使っている。CPUは10%程度。スワップによりHDDアクセスが増えて遅くなっているようだ。


使用しているアカウントは４つ。

- gmail
- i.softbank.jp
- gmail (google apps)
- 自サーバーのIMAP

アカウントの有効無効を繰り返した結果、gmailを切ると問題が発生しない。gmailは他のアカウントに比べてデータ量が半端ないのでもしかすると量も関係しているかもしれない。

色々試して見つけた解決の方法は２つ。

- A. 何かわからないが処理をしているようなので、放っておく。数時間かかる。
- B. アカウントを無効 -> 有効にする。すぐ終わる。

どちらかの方法を行えば、一時的に問題ない状態になる。A. の方法は時間がかかるが、なんとなくこちらの方が良い気がする。B. の方法は無理矢理だがすぐに解決できる。手順は以下の通り。

1. 環境設定 > アカウント > Gmailのアカウント > 詳細
  - このアカウントを使用のチェックを外す
2. Mail.appを再起動
  - 問題ないことを確認
3. Mail.appを再起動
4. チェックを外したアカウントを有効にする
5. メモとTODOの既定アカウントにしていた場合は再設定する
  - 環境設定＞作成＞メモとTODO


ディスカッションに上がっているこれらは同じ問題だろうか。

- <https://discussions.apple.com/thread/2003573?start=0&tstart=0>
- <https://discussions.apple.com/thread/3454806?start=0&tstart=0>

Mail.appのIMAPアクセスは不安定、Lionでも発生するらしい。


## 2012-10-06 追記

1ヶ月ほど前、メモ機能とGmailとの相性が悪いのではないかと考え、Mobile Meのアカウントを設定してそちらにメモを移動させた。
それと同時に、1500件ほどあったメモの内、古いメモを削除した。半分程度になった。

それから1ヶ月経過したが、今のところメモリを消費する現象は発生していない。



